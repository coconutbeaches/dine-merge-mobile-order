@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 15, 23, 42;
  --background-rgb: 248, 250, 252;
  --primary-color: 16, 185, 129;
  --primary-light: 209, 250, 229;
  --primary-dark: 4, 120, 87;
  --secondary-color: 107, 114, 128;
  --accent-color: 14, 165, 233;
  --error-color: 239, 68, 68;
  --success-color: 34, 197, 94;
  --warning-color: 245, 158, 11;
  --border-radius: 0.5rem;
}

/* Base styles */
@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    scroll-behavior: smooth;
    text-size-adjust: 100%;
    height: -webkit-fill-available;
  }
  
  body {
    color: rgb(var(--foreground-rgb));
    background: rgb(var(--background-rgb));
    min-height: 100vh;
    min-height: -webkit-fill-available;
    font-feature-settings: "rlig" 1, "calt" 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Thai text optimization */
  :lang(th) {
    line-height: 1.7;
    letter-spacing: 0.01em;
  }

  /* Improve font rendering for Thai numerals */
  .thai-numerals {
    font-feature-settings: "thai" on;
  }

  /* Focus styles for accessibility */
  *:focus-visible {
    outline: 2px solid rgb(var(--primary-color));
    outline-offset: 2px;
  }

  /* Hide scrollbar but allow scrolling */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Smooth image loading */
  img {
    transition: opacity 0.3s ease;
  }

  img.loading {
    opacity: 0.5;
  }

  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-prompt);
    font-weight: 600;
  }
}

/* Component styles */
@layer components {
  /* Button styles */
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-3 text-base font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500;
  }

  .btn-secondary {
    @apply bg-secondary-500 text-white hover:bg-secondary-600 focus:ring-secondary-500;
  }

  .btn-outline {
    @apply border border-secondary-300 bg-transparent hover:bg-secondary-50 focus:ring-secondary-300;
  }

  .btn-whatsapp {
    @apply bg-[#25D366] text-white hover:bg-[#128C7E] focus:ring-[#25D366];
  }

  /* Card styles */
  .card {
    @apply bg-white rounded-lg shadow-card overflow-hidden;
  }

  /* Menu item styles */
  .menu-item {
    @apply flex flex-col p-3 rounded-lg bg-white transition-all duration-200 hover:shadow-soft;
  }

  .menu-item-image {
    @apply aspect-square w-full object-cover rounded-md overflow-hidden mb-2;
  }

  .menu-item-name {
    @apply font-medium text-lg mb-1;
  }

  .menu-item-price {
    @apply text-base font-medium text-secondary-800;
  }

  /* Cart styles */
  .cart-item {
    @apply flex items-center py-3 border-b border-secondary-100 last:border-0;
  }

  .cart-item-image {
    @apply w-16 h-16 rounded-md object-cover mr-3;
  }

  .cart-button {
    @apply fixed bottom-4 left-1/2 transform -translate-x-1/2 z-20 bg-secondary-800 text-white rounded-full py-2 px-5 shadow-lg;
  }

  /* Form styles */
  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block text-secondary-700 mb-1 font-medium;
  }

  .form-input {
    @apply w-full rounded-lg border border-secondary-300 px-3 py-2 text-secondary-900 placeholder-secondary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
  }

  .form-select {
    @apply w-full rounded-lg border border-secondary-300 px-3 py-2 text-secondary-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent appearance-none bg-white bg-no-repeat bg-[right_0.5rem_center];
  }

  /* Quantity selector */
  .quantity-selector {
    @apply flex items-center border border-secondary-300 rounded-lg overflow-hidden;
  }

  .quantity-btn {
    @apply flex items-center justify-center w-8 h-8 bg-secondary-100 text-secondary-800 hover:bg-secondary-200;
  }

  .quantity-input {
    @apply w-10 text-center border-x border-secondary-300 h-8;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-800;
  }

  .badge-secondary {
    @apply bg-secondary-100 text-secondary-800;
  }

  /* Thai Baht currency */
  .thai-baht {
    @apply font-medium;
  }

  .thai-baht::before {
    content: "฿";
  }

  /* Status indicators */
  .status-pending {
    @apply bg-yellow-100 text-yellow-800;
  }

  .status-confirmed {
    @apply bg-blue-100 text-blue-800;
  }

  .status-completed {
    @apply bg-green-100 text-green-800;
  }

  .status-cancelled {
    @apply bg-red-100 text-red-800;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin rounded-full h-5 w-5 border-2 border-t-transparent;
  }

  /* Header styles */
  .page-header {
    @apply flex items-center justify-between px-4 py-3 bg-white shadow-sm sticky top-0 z-10;
  }
  
  /* Category header */
  .category-header {
    @apply bg-black text-white font-medium py-2 px-4 rounded-lg mb-3;
  }

  /* Bottom navigation */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0 bg-white border-t border-secondary-200 flex items-center justify-around py-2 z-10;
  }

  /* WhatsApp button */
  .whatsapp-button {
    @apply bg-[#25D366] text-white flex items-center justify-center gap-2 rounded-lg py-3 px-4 font-medium transition-transform active:scale-95;
  }
}

/* Utility styles */
@layer utilities {
  /* Thai Baht formatting */
  .format-baht {
    @apply relative;
  }
  
  .format-baht::before {
    content: "฿";
    @apply mr-0.5;
  }

  /* Truncate with ellipsis for 2 lines */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Safe area insets for modern iOS devices */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Touch target size (minimum 44x44px) */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Prevent text selection */
  .no-select {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Optimized tap highlight */
  .tap-highlight {
    -webkit-tap-highlight-color: rgba(var(--primary-color), 0.2);
  }

  /* Hide elements only visually but keep them accessible */
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Responsive font sizes */
  .text-responsive {
    font-size: clamp(1rem, 4vw, 1.25rem);
  }

  /* Smooth animations */
  .transition-smooth {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }
}

/* Media queries */
@media (max-width: 640px) {
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* Optimizations for Thai mobile devices */
@media (max-width: 360px) {
  html {
    font-size: 14px;
  }
  
  .btn {
    @apply px-3 py-2 text-sm;
  }
}

/* Dark mode support (optional) */
@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 248, 250, 252;
    --background-rgb: 15, 23, 42;
  }

  .card, .menu-item, .page-header, .bottom-nav {
    @apply bg-secondary-800 text-white border-secondary-700;
  }

  .form-input, .form-select {
    @apply bg-secondary-700 border-secondary-600 text-white placeholder-secondary-400;
  }
}
