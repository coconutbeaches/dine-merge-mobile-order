(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{4283:function(e,t,r){Promise.resolve().then(r.bind(r,8302))},8302:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(8642),n=r(84),i=r(5217),a=r(7819);function o(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)().get("stay_id"),[r,o]=(0,i.useState)(""),[u,c]=(0,i.useState)(!1),l=async()=>{if(t&&r){c(!0);try{var s;let{data:n,error:i}=await a.O.auth.signInAnonymously();if(i)throw i;let o=null===(s=n.user)||void 0===s?void 0:s.id;if(!o)throw Error("Failed to authenticate guest user.");let{error:u}=await a.O.from("guest_users").insert({auth_user_id:o,user_id:"".concat(t.toLowerCase(),"_").concat(r.toLowerCase()),first_name:r,stay_id:t});if(u)throw u;localStorage.setItem("user_id",o),e.push("/menu")}catch(e){console.error("Registration error:",e),alert("Registration failed: ".concat(e.message||"Unknown error"))}finally{c(!1)}}},d=t?"Room ".concat(t.toUpperCase()):"Room";return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-md",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-center mb-6",children:["Welcome to ",d," \uD83C\uDF79"]}),(0,s.jsx)("input",{type:"text",placeholder:"First Name",value:r,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{onClick:l,disabled:u,className:"w-full py-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:u?"Registering...":"Register & View Menu"})]})})}function u(){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{children:"Loading..."})}),children:(0,s.jsx)(o,{})})}},84:function(e,t,r){"use strict";var s=r(903);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},7819:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var s=r(8101);let n=null,i=(0,s.eI)("https://wcplwmvbhreevxvsdmog.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjcGx3bXZiaHJlZXZ4dnNkbW9nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5Njc5MDIsImV4cCI6MjA2MjU0MzkwMn0.lyq2RNg01GDyqkT5yjPSSxs2h3581Hr8QmytpDDzhTo",{auth:{persistSession:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[101,692,253,744],function(){return e(e.s=4283)}),_N_E=e.O()}]);